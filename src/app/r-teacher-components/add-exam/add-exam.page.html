<ion-header>
  <ion-buttons slot="start">
    <ion-menu-button></ion-menu-button>
    <ion-title>Add Exam</ion-title>
  </ion-buttons>
</ion-header>

<ion-content>
  <ion-grid class="ion-no-padding">
    <ion-row>
      <ion-col size-md="9" size-sm="12" size="12">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Question List</ion-card-title>
          </ion-card-header>
          <ion-card-content class="h-300">
            <ion-grid class="ion-no-padding">
              <ion-row *ngFor="let question of examDetail['questions']">
                <ion-col size="12" class="ion-no-padding">
                  <ion-label>Question {{ question.question_no}}</ion-label>
                  <ion-input [(ngModel)]="question.question_title"></ion-input>
                </ion-col>
                <ion-col
                  size-md="11"
                  offset="1"
                  size-sm="12"
                  size="12"
                  class="ion-no-padding"
                >
                  <ion-radio-group>
                    <ion-list-header>
                      <ion-label>
                        Select Correct Answer *
                      </ion-label>
                    </ion-list-header>

                    <ion-item
                      *ngFor="let option of question['question_options']"
                    >
                      <ion-label class="m-lr-5"
                        >Option {{option.optionid}}</ion-label
                      >
                      <ion-radio
                        class="m-lr-5"
                        value="{{option.optionid}}"
                        [checked]="question.correct_answer  === option.optionid"
                        (ionSelect)="setCorrectAnswer(option.optionid, question.question_no)"
                        name="ques_options_{{question.question_no}}"
                      ></ion-radio>
                      <ion-input [(ngModel)]="option.option"></ion-input>
                    </ion-item>
                  </ion-radio-group>
                </ion-col>
                <ion-col text-right>
                  <ion-button (click)="saveQuestion(question.question_no)"
                    >SAVE
                  </ion-button>
                  <ion-button (click)="removeQuestion(question._id)"
                    >Remove</ion-button
                  >
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>

        <ion-grid text-center class="ion-no-padding">
          <ion-row>
            <ion-col>
              <ion-button (click)="addQuestion(lastQuestionNo)">
                ADD QUESTION
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-col>
      <ion-col size-md="3" size-sm="12" size="12">
        <ion-card>
          <ion-card-header>
            <ion-card-title>Exam details</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <ion-grid class="ion-no-padding">
              <ion-row>
                <ion-col size="12" class="ion-no-padding">
                  <ion-label>Exam Name</ion-label>
                  <ion-input [(ngModel)]="examDetail.Exam_Name"></ion-input>
                </ion-col>
                <ion-col size="12" class="ion-no-padding mt-5">
                  <ion-label>Exam Description</ion-label>
                  <ion-textarea
                    rows="6"
                    [(ngModel)]="examDetail.Exam_Description"
                  ></ion-textarea>
                </ion-col>
                <ion-col size="12" class="ion-no-padding mt-5">
                  <ion-label>Exam Start</ion-label>
                  <ion-datetime
                    displayFormat="MM/DD/YYYY"
                    min="2020-03-14"
                    max="2040-12-09"
                    [(ngModel)]="examDetail.Exam_StartDateTime"
                  >
                  </ion-datetime>
                </ion-col>
                <ion-col size="12" class="ion-no-padding mt-5">
                  <ion-label>Exam End</ion-label>
                  <ion-datetime
                    displayFormat="MM/DD/YYYY"
                    min="2020-03-14"
                    max="2040-12-09"
                    [(ngModel)]="examDetail.Exam_EndDateTime"
                  >
                  </ion-datetime>
                </ion-col>
              </ion-row>
              <ion-item-divider></ion-item-divider>
              <ion-row text-center>
                <ion-button (click)="updateExamDetails()">Save Exam Detail</ion-button>
              </ion-row>
            </ion-grid>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
